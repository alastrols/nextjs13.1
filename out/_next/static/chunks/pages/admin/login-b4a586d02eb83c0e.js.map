{"version":3,"file":"static/chunks/pages/admin/login-b4a586d02eb83c0e.js","mappings":"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","sources":["webpack://_N_E/?5b45","webpack://_N_E/./components/admin/withAuth.tsx","webpack://_N_E/./pages/admin/login.tsx","webpack://_N_E/./store/hooks.ts","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/admin/login\",\n      function () {\n        return require(\"private-next-pages/admin/login.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/admin/login\"])\n      });\n    }\n  ","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Router, { useRouter } from \"next/router\";\r\nimport { appSelector, appDispatch } from \"@/store/hooks\";\r\nimport { getSession } from \"@/features/admin/login\";\r\n\r\nconst withAuth = (WrappedComponent: React.FC) => (props: any) => {\r\n  const router = useRouter();\r\n  const { route } = router;\r\n  const { data, isAuthenticated, isAuthenticating } = appSelector(\r\n    (state: any) => state.login\r\n  );\r\n  const dispatch = appDispatch();\r\n  React.useEffect(() => {\r\n    dispatch(getSession());\r\n  }, [dispatch]);\r\n\r\n  // is fetching session (eg. show spinner)\r\n  if (isAuthenticating) {\r\n    return null;\r\n  }\r\n  // If user is not logged in, return login component\r\n\r\n  if (route !== \"/admin/login\" && route !== \"/admin/register\") {\r\n    if (!isAuthenticated) {\r\n      router.push(`/admin/login`);\r\n      return null;\r\n    }\r\n  } else {\r\n    if (isAuthenticated) {\r\n      router.push(`/admin/user`); // default page after login\r\n      return null;\r\n    }\r\n  }\r\n  \r\n  if (route == \"/admin\") {\r\n    if (isAuthenticated) {\r\n      router.push(`/admin/user`);\r\n      return null;\r\n    }else{\r\n      router.push(`/admin/login`);\r\n      return null;\r\n    }\r\n  }\r\n  // If user is logged in, return original component\r\n  return <WrappedComponent {...props} />;\r\n\r\n  return null;\r\n};\r\n\r\nexport default withAuth;\r\n","import React from \"react\";\r\nimport { Formik, Form, Field, FormikProps } from \"formik\";\r\nimport { makeStyles } from \"@mui/material/styles\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardActionArea from \"@mui/material/CardActionArea\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport CardMedia from \"@mui/material/CardMedia\";\r\nimport Button, { ButtonProps } from \"@mui/material/Button\";\r\nimport { styled } from \"@mui/material/styles\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport { TextField } from \"formik-material-ui\";\r\nimport { useRouter } from \"next/router\";\r\nimport { Box } from \"@mui/material\";\r\nimport { purple, red } from \"@mui/material/colors\";\r\nimport { appDispatch, appSelector } from \"@/store/hooks\";\r\nimport { login } from \"@/features/admin/login\";\r\nimport Image from \"next/image\";\r\nimport withAuth from \"@/components/admin/withAuth\";\r\ntype Props = {};\r\n\r\nconst Login = ({}: Props) => {\r\n  const router = useRouter();\r\n  const dispatch = appDispatch();\r\n\r\n  const CancelButton = styled(Button)<ButtonProps>(({ theme }: any) => ({\r\n    color: theme.palette.getContrastText(purple[500]),\r\n    marginTop: 5,\r\n    backgroundColor: purple[500],\r\n    \"&:hover\": {\r\n      backgroundColor: purple[700],\r\n    },\r\n  }));\r\n\r\n  const showForm = ({\r\n    values,\r\n    setFieldValue,\r\n    isValid,\r\n    dirty,\r\n    handleSubmit,\r\n  }: FormikProps<any>) => {\r\n    return (\r\n      <Form onSubmit={handleSubmit}>\r\n        <Typography variant=\"h4\" component=\"h4\">\r\n          Login\r\n        </Typography>\r\n        <Field\r\n          component={TextField}\r\n          name=\"username\"\r\n          id=\"username\"\r\n          margin=\"normal\"\r\n          required\r\n          fullWidth\r\n          label=\"Username\"\r\n          autoComplete=\"email\"\r\n          autoFocus\r\n        />\r\n        <Field\r\n          component={TextField}\r\n          name=\"password\"\r\n          margin=\"normal\"\r\n          required\r\n          fullWidth\r\n          label=\"Password\"\r\n          type=\"password\"\r\n          id=\"password\"\r\n          autoComplete=\"current-password\"\r\n        />\r\n\r\n        <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\r\n          Login\r\n        </Button>\r\n        {/* <CancelButton\r\n          fullWidth\r\n          variant=\"contained\"\r\n          onClick={() => router.push(\"/admin/register\")}\r\n        >\r\n          Register\r\n        </CancelButton> */}\r\n      </Form>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        minHeight: \"100vh\",\r\n      }}\r\n    >\r\n      <Card sx={{ maxWidth: 450, textAlign: \"center\" }}>\r\n        {/* <CardMedia\r\n          sx={{ height: 155 }}\r\n          image=\"/static/images/logo.png\"\r\n          title=\"Contemplative Reptile\"\r\n        /> */}\r\n        {/* <Image\r\n            src=\"/static/images/logo.png\"\r\n            width={200}\r\n            height={68}\r\n            objectFit=\"cover\"\r\n            alt=\"logo\"\r\n          /> */}\r\n        <CardContent>\r\n          <Formik\r\n            initialValues={{ username: \"\", password: \"\" }}\r\n            onSubmit={async (values: any) => {\r\n              const response = await dispatch(login(values));\r\n              if (response.meta.requestStatus === \"rejected\") {\r\n                alert(\"Login Failed!\");\r\n              } else {\r\n                router.push(\"/admin/user\");\r\n              }\r\n            }}\r\n          >\r\n            {(props: any) => showForm(props)}\r\n          </Formik>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* <style jsx global>\r\n        {`\r\n          body {\r\n            min-height: 100vh;\r\n            position: relative;\r\n            margin: 0;\r\n            background-size: cover;\r\n            background-image: url(\"/static/img/bg4.jpg\");\r\n            text-align: center;\r\n          }\r\n        `}\r\n      </style> */}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default withAuth(Login);\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\nimport { AppDispatch, RootState } from \"@/store/store\";\r\n\r\nexport const appDispatch = () => useDispatch<AppDispatch>();\r\nexport const appSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n"],"names":["window","__NEXT_P","push","__webpack_require__","withAuth","router","useRouter","route","data","isAuthenticated","isAuthenticating","appSelector","state","login","dispatch","appDispatch","React","getSession","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","WrappedComponent","props","__webpack_exports__","Login","param","styled","Button","theme","color","palette","getContrastText","purple","marginTop","backgroundColor","showForm","values","setFieldValue","isValid","dirty","handleSubmit","jsxs","Form","onSubmit","Typography","variant","component","Field","TextField","name","id","margin","required","fullWidth","label","autoComplete","autoFocus","type","Box","sx","display","flexDirection","justifyContent","alignItems","minHeight","Card","maxWidth","textAlign","CardContent","Formik","initialValues","username","password","response","meta","requestStatus","alert","useDispatch","useSelector"],"sourceRoot":""}