(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{5546:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/news/jp/edit",function(){return n(6044)}])},5078:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var i=n(5893),a=n(7294),s=n(1496),r=n(7357),l=n(6720),o=n(2293),d=n(155),c=n(3946),u=n(326),p=n(1988),h=n(5294),x=n(8972),m=n(7027),j=n(2686);let f=(0,s.ZP)(o.Z,{shouldForwardProp:e=>"open"!==e})(e=>{let{theme:t,open:n}=e;return{transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),...n&&{width:"calc(100% - ".concat(240,"px)"),marginLeft:"".concat(240,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})}}});function g(e){let{open:t,onDrawerOpen:n}=e,[s,l]=a.useState(!1),o=()=>{l(!1)},g=(0,j.t)(),[Z,w]=a.useState(null),b=a.useRef(null);return a.useEffect(()=>{w(b.current)},[b]),(0,i.jsx)(f,{position:"fixed",open:t,children:(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(c.Z,{color:"inherit","aria-label":"open drawer",onClick:n,edge:"start",sx:{mr:2,...t&&{display:"none"}},children:(0,i.jsx)(u.Z,{})}),(0,i.jsx)(r.Z,{sx:{flexGrow:1}}),(0,i.jsxs)(r.Z,{sx:{display:{xs:"none",md:"flex"}},children:[(0,i.jsx)(c.Z,{ref:b,"aria-label":"account of current user","aria-haspopup":"true",color:"inherit",onClick:()=>l(!s),children:(0,i.jsx)(p.Z,{})}),(0,i.jsx)(h.Z,{anchorEl:Z,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:s,onClose:o,children:(0,i.jsx)(x.Z,{onClick:()=>g((0,m.kS)()),children:"Logout"})})]})]})})}var Z=n(2734),w=n(7533),b=n(8462),y=n(7720),v=n(9572),_=n(6215),S=n(7594),k=n(9334),D=n(6447),P=n(891),C=n(7922),E=n(1664),M=n.n(E),N=n(1718),Y=n(1163),O=n(5398),W=n(5675),z=n.n(W),F=n(9473);let R=(0,s.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",padding:t.spacing(0,1),...t.mixins.toolbar,justifyContent:"flex-end"}});function I(e){let{open:t,onDrawerClose:n}=e,s=(0,Z.Z)(),r=(0,Y.useRouter)();(0,F.v9)(e=>e.admin);let[l,o]=a.useState(!1),[d,u]=a.useState(!1);return(0,i.jsxs)(w.ZP,{sx:{width:240,flexShrink:0,"& .MuiDrawer-paper":{width:240,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:t,children:[(0,i.jsx)(R,{children:(0,i.jsxs)(D.Z,{direction:"row",alignItems:"center",children:[(0,i.jsx)(z(),{width:200,height:68,unoptimized:!0,alt:"logo",src:"/static/images/logo.png"}),(0,i.jsx)(c.Z,{onClick:n,children:"ltr"===s.direction?(0,i.jsx)(v.Z,{}):(0,i.jsx)(_.Z,{})})]})}),(0,i.jsx)(y.Z,{}),(0,i.jsx)(b.Z,{children:(0,i.jsx)(M(),{href:"/admin/user",style:{textDecoration:"none",color:"#000000DE"},passHref:!0,children:(0,i.jsxs)(P.ZP,{button:!0,onClick:()=>o(!l),className:"/admin/user"===r.pathname?"Mui-selected":"/admin/user/edit"===r.pathname?"Mui-selected":"/admin/user/add"===r.pathname?"Mui-selected":"",children:[(0,i.jsx)(S.Z,{children:(0,i.jsx)(O.Z,{})}),(0,i.jsx)(k.Z,{primary:"User"})]})})}),(0,i.jsx)(b.Z,{children:(0,i.jsxs)(M(),{href:"#",style:{textDecoration:"none",color:"#000000DE"},passHref:!0,children:[(0,i.jsxs)(P.ZP,{onClick:()=>u(!d),className:"/admin/news/jp"===r.pathname?"Mui-selected":"/admin/news/jp/edit"===r.pathname?"Mui-selected":"/admin/news/jp/add"===r.pathname?"Mui-selected":"",children:[(0,i.jsx)(S.Z,{children:(0,i.jsx)(N.Z,{})}),(0,i.jsx)(k.Z,{primary:"News"})]}),(0,i.jsx)(C.Z,{in:"/admin/news/jp"===r.pathname||"/admin/news/jp/edit"===r.pathname||"/admin/news/jp/add"===r.pathname||d,timeout:"auto",unmountOnExit:!0,children:(0,i.jsx)(b.Z,{component:"li",disablePadding:!0,style:{display:"flex",justifyContent:"center"},children:(0,i.jsx)(M(),{href:"/admin/news/jp",style:{textDecoration:"/admin/news/jp"==r.pathname?"":"/admin/news/jp/add"==r.pathname?"":"/admin/news/jp/edit"==r.pathname?"":"none",color:"#000000DE"},passHref:!0,children:(0,i.jsxs)(P.ZP,{children:[(0,i.jsx)(S.Z,{children:(0,i.jsx)(N.Z,{fontSize:"small"})}),(0,i.jsx)(k.Z,{primary:"JP"},0)]},0)})},0)},0)]})})]})}let L=(0,s.ZP)("main",{shouldForwardProp:e=>"open"!==e})(e=>{let{theme:t,open:n}=e;return{flexGrow:1,padding:t.spacing(3),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(240,"px"),...n&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0}}}),A=(0,s.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",padding:t.spacing(0,1),...t.mixins.toolbar,justifyContent:"flex-end"}});function T(e){let{children:t}=e,[n,s]=a.useState(!0),o=()=>{s(!0)},d=()=>{s(!1)};return(0,i.jsxs)(r.Z,{sx:{display:"flex"},children:[(0,i.jsx)(l.ZP,{}),(0,i.jsx)(g,{open:n,onDrawerOpen:o}),(0,i.jsx)(I,{open:n,onDrawerClose:d}),(0,i.jsxs)(L,{open:n,children:[(0,i.jsx)(A,{}),t]})]})}},6477:function(e,t,n){"use strict";var i=n(5893);n(7294);var a=n(1163),s=n(2686),r=n(7027);let l=e=>t=>{let n=(0,a.useRouter)(),{route:l}=n,{data:o,isAuthenticated:d,isAuthenticating:c}=(0,s.W)(e=>e.login),u=(0,s.t)();if(c)return u((0,r.Gg)()),null;if("/admin/login"!==l&&"/admin/register"!==l){if(!d)return n.push("/admin/login"),null}else if(d)return n.push("/admin/news/jp"),null;return"/admin"==l?d?(n.push("/admin/news/jp"),null):(n.push("/admin/login"),null):(0,i.jsx)(e,{...t})};t.Z=l},6044:function(e,t,n){"use strict";n.r(t);var i=n(5893),a=n(5078),s=n(6477),r=n(7294),l=n(7357),o=n(4593),d=n(2175),c=n(6242),u=n(4267),p=n(2023),h=n(3321),x=n(5861),m=n(315),j=n(8972),f=n(3841),g=n(4054),Z=n(6235),w=n(8945),b=n(6455),y=n.n(b),v=n(6829),_=n(2359),S=n(1085),k=n(7484),D=n.n(k),P=n(2686),C=n(5024),E=n(1163),M=n.n(E);t.default=(0,s.Z)(function(){let e=(0,P.t)(),t=M().query.id,n=(0,r.useRef)(null),[s,b]=r.useState("Publish"),[k,E]=r.useState(D()()),{data:N}=(0,P.W)(e=>e.news),[Y,O]=r.useState(""),[W,z]=r.useState("");N&&0===N.length&&M().push("/admin/news/jp"),r.useEffect(()=>{e((0,C.XC)(t)).then(e=>{e.payload&&e.payload.length>0&&(E(e.payload[0].post_date),O(e.payload[0].topic),b(e.payload[0].status),z(e.payload[0].detail))})},[e,t]);let F=e=>{let{values:t,setFieldValue:a,isValid:r}=e;return(0,i.jsx)(d.l0,{children:(0,i.jsxs)(c.Z,{children:[(0,i.jsxs)(u.Z,{sx:{padding:4},children:[(0,i.jsx)(x.Z,{gutterBottom:!0,variant:"h4",children:"Edit News JP"}),(0,i.jsx)(_._,{dateAdapter:v.y,children:(0,i.jsx)(S.O,{label:"Post Date",inputFormat:"YYYY-MM-DD",value:k,onChange:e=>{E(e)},renderInput:e=>(0,i.jsx)(d.gN,{...e,fullWidth:!0,component:o.n,name:"post_date",type:"text",label:"Post Date"})})}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(d.gN,{fullWidth:!0,component:o.n,name:"topic",type:"text",label:"Topic",value:Y,onChange:e=>{O(e.target.value)}}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(d.gN,{name:"status",style:{marginTop:16},component:()=>(0,i.jsxs)(g.Z,{fullWidth:!0,children:[(0,i.jsx)(f.Z,{children:"Status"}),(0,i.jsxs)(m.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Status",onChange:e=>{b(e.target.value)},value:s,fullWidth:!0,children:[(0,i.jsx)(j.Z,{value:"Publish",children:"Publish"}),(0,i.jsx)(j.Z,{value:"Draft",children:"Draft"})]})]})}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(Z.M,{apiKey:"2s0w71caf8mc5dpcr17pwapuu74ko8mkivvenvzdmvnqyjti",onInit:(e,t)=>n.current=t,initialValue:W,init:{height:750,menubar:!0,automatic_uploads:!1,file_picker_callback:function(e,t,n){var i=document.createElement("input");i.setAttribute("type","file"),i.setAttribute("accept","image/*, video/*"),i.onchange=async function(t){var n=t.target.files[0],i=n.name,a=new FileReader;a.onload=function(t){var n=t.target.result;fetch(n).then(e=>e.blob()).then(async t=>{var n=new FormData;n.append("file",t,i);let a=await w.Z.post("".concat("http://localhost:3001/api","/tinyupload"),n);e(a.data.location,{alt:a.data.alt})})},a.readAsDataURL(n)},i.click()},plugins:"link image textpattern lists table preview media",toolbar:" undo redo preview | formatselect | Link | image media | table | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})]}),(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(h.Z,{disabled:!r,fullWidth:!0,variant:"contained",color:"primary",type:"submit",sx:{marginRight:1},children:"Edit"}),(0,i.jsx)(h.Z,{variant:"contained",color:"error",fullWidth:!0,onClick:()=>M().push("/admin/news/jp"),children:"Cancel"})]})]})})};return(0,i.jsx)(a.Z,{children:(0,i.jsx)(l.Z,{children:(0,i.jsx)(l.Z,{sx:{width:"100%",maxWidth:"100%"},children:(0,i.jsx)(d.J9,{validate:e=>{let t={};return e.post_date||(t.post_date="Enter Post Date"),Y||(t.topic="Enter Topic"),e.status||(t.status="Enter Status"),t},initialValues:{post_date:N,topic:Y,detail:W,status:s},onSubmit:async(i,a)=>{let{setSubmitting:r}=a,l=new FormData,o=D()(k,"YYYY-MM-DD").toDate(),d=o.getDate(),c=o.getMonth()+1;c<=9&&(c="0"+c);let u=o.getFullYear(),p=u+"-"+c+"-"+d;l.append("post_date",p),l.append("topic",String(Y)),l.append("status",String(s)),n.current?l.append("detail",n.current.getContent()):l.append("detail",""),l.append("news_id",t),e((0,C.f_)(l)).then(e=>{"success"==e.payload.data.status?y().fire("Success!","Your data has been updated","success").then(function(){M().push("/admin/news/jp")}):y().fire("Error!","Please check your input","error").then(function(){return!1})}),r(!1)},children:e=>F(e)})})})})})}},function(e){e.O(0,[350,616,903,25,129,774,888,179],function(){return e(e.s=5546)}),_N_E=e.O()}]);
//# sourceMappingURL=edit-fabaa2ba02236e0a.js.map