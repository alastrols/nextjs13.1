(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[876],{436:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/news/jp/add",function(){return t(2529)}])},5078:function(e,n,t){"use strict";t.d(n,{Z:function(){return T}});var i=t(5893),a=t(7294),s=t(1496),r=t(7357),l=t(6720),o=t(2293),d=t(155),c=t(3946),u=t(326),p=t(1988),h=t(5294),x=t(8972),m=t(7027),j=t(2686);let f=(0,s.ZP)(o.Z,{shouldForwardProp:e=>"open"!==e})(e=>{let{theme:n,open:t}=e;return{transition:n.transitions.create(["margin","width"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen}),...t&&{width:"calc(100% - ".concat(240,"px)"),marginLeft:"".concat(240,"px"),transition:n.transitions.create(["margin","width"],{easing:n.transitions.easing.easeOut,duration:n.transitions.duration.enteringScreen})}}});function g(e){let{open:n,onDrawerOpen:t}=e,[s,l]=a.useState(!1),o=()=>{l(!1)},g=(0,j.t)(),[Z,w]=a.useState(null),b=a.useRef(null);return a.useEffect(()=>{w(b.current)},[b]),(0,i.jsx)(f,{position:"fixed",open:n,children:(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(c.Z,{color:"inherit","aria-label":"open drawer",onClick:t,edge:"start",sx:{mr:2,...n&&{display:"none"}},children:(0,i.jsx)(u.Z,{})}),(0,i.jsx)(r.Z,{sx:{flexGrow:1}}),(0,i.jsxs)(r.Z,{sx:{display:{xs:"none",md:"flex"}},children:[(0,i.jsx)(c.Z,{ref:b,"aria-label":"account of current user","aria-haspopup":"true",color:"inherit",onClick:()=>l(!s),children:(0,i.jsx)(p.Z,{})}),(0,i.jsx)(h.Z,{anchorEl:Z,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:s,onClose:o,children:(0,i.jsx)(x.Z,{onClick:()=>g((0,m.kS)()),children:"Logout"})})]})]})})}var Z=t(2734),w=t(7533),b=t(8462),y=t(7720),v=t(9572),P=t(6215),k=t(7594),D=t(9334),_=t(6447),S=t(891),C=t(7922),E=t(1664),M=t.n(E),N=t(1718),Y=t(1163),O=t(5398),W=t(5675),z=t.n(W),A=t(9473);let F=(0,s.ZP)("div")(e=>{let{theme:n}=e;return{display:"flex",alignItems:"center",padding:n.spacing(0,1),...n.mixins.toolbar,justifyContent:"flex-end"}});function R(e){let{open:n,onDrawerClose:t}=e,s=(0,Z.Z)(),r=(0,Y.useRouter)();(0,A.v9)(e=>e.admin);let[l,o]=a.useState(!1),[d,u]=a.useState(!1);return(0,i.jsxs)(w.ZP,{sx:{width:240,flexShrink:0,"& .MuiDrawer-paper":{width:240,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:n,children:[(0,i.jsx)(F,{children:(0,i.jsxs)(_.Z,{direction:"row",alignItems:"center",children:[(0,i.jsx)(z(),{width:200,height:68,unoptimized:!0,alt:"logo",src:"/static/images/logo.png"}),(0,i.jsx)(c.Z,{onClick:t,children:"ltr"===s.direction?(0,i.jsx)(v.Z,{}):(0,i.jsx)(P.Z,{})})]})}),(0,i.jsx)(y.Z,{}),(0,i.jsx)(b.Z,{children:(0,i.jsx)(M(),{href:"/admin/user",style:{textDecoration:"none",color:"#000000DE"},passHref:!0,children:(0,i.jsxs)(S.ZP,{button:!0,onClick:()=>o(!l),className:"/admin/user"===r.pathname?"Mui-selected":"/admin/user/edit"===r.pathname?"Mui-selected":"/admin/user/add"===r.pathname?"Mui-selected":"",children:[(0,i.jsx)(k.Z,{children:(0,i.jsx)(O.Z,{})}),(0,i.jsx)(D.Z,{primary:"User"})]})})}),(0,i.jsx)(b.Z,{children:(0,i.jsxs)(M(),{href:"#",style:{textDecoration:"none",color:"#000000DE"},passHref:!0,children:[(0,i.jsxs)(S.ZP,{onClick:()=>u(!d),className:"/admin/news/jp"===r.pathname?"Mui-selected":"/admin/news/jp/edit"===r.pathname?"Mui-selected":"/admin/news/jp/add"===r.pathname?"Mui-selected":"",children:[(0,i.jsx)(k.Z,{children:(0,i.jsx)(N.Z,{})}),(0,i.jsx)(D.Z,{primary:"News"})]}),(0,i.jsx)(C.Z,{in:"/admin/news/jp"===r.pathname||"/admin/news/jp/edit"===r.pathname||"/admin/news/jp/add"===r.pathname||d,timeout:"auto",unmountOnExit:!0,children:(0,i.jsx)(b.Z,{component:"li",disablePadding:!0,style:{display:"flex",justifyContent:"center"},children:(0,i.jsx)(M(),{href:"/admin/news/jp",style:{textDecoration:"/admin/news/jp"==r.pathname?"":"/admin/news/jp/add"==r.pathname?"":"/admin/news/jp/edit"==r.pathname?"":"none",color:"#000000DE"},passHref:!0,children:(0,i.jsxs)(S.ZP,{children:[(0,i.jsx)(k.Z,{children:(0,i.jsx)(N.Z,{fontSize:"small"})}),(0,i.jsx)(D.Z,{primary:"JP"},0)]},0)})},0)},0)]})})]})}let I=(0,s.ZP)("main",{shouldForwardProp:e=>"open"!==e})(e=>{let{theme:n,open:t}=e;return{flexGrow:1,padding:n.spacing(3),transition:n.transitions.create("margin",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen}),marginLeft:"-".concat(240,"px"),...t&&{transition:n.transitions.create("margin",{easing:n.transitions.easing.easeOut,duration:n.transitions.duration.enteringScreen}),marginLeft:0}}}),L=(0,s.ZP)("div")(e=>{let{theme:n}=e;return{display:"flex",alignItems:"center",padding:n.spacing(0,1),...n.mixins.toolbar,justifyContent:"flex-end"}});function T(e){let{children:n}=e,[t,s]=a.useState(!0),o=()=>{s(!0)},d=()=>{s(!1)};return(0,i.jsxs)(r.Z,{sx:{display:"flex"},children:[(0,i.jsx)(l.ZP,{}),(0,i.jsx)(g,{open:t,onDrawerOpen:o}),(0,i.jsx)(R,{open:t,onDrawerClose:d}),(0,i.jsxs)(I,{open:t,children:[(0,i.jsx)(L,{}),n]})]})}},6477:function(e,n,t){"use strict";var i=t(5893);t(7294);var a=t(1163),s=t(2686),r=t(7027);let l=e=>n=>{let t=(0,a.useRouter)(),{route:l}=t,{data:o,isAuthenticated:d,isAuthenticating:c}=(0,s.W)(e=>e.login),u=(0,s.t)();if(c)return u((0,r.Gg)()),null;if("/admin/login"!==l&&"/admin/register"!==l){if(!d)return t.push("/admin/login"),null}else if(d)return t.push("/admin/news/jp"),null;return"/admin"==l?d?(t.push("/admin/news/jp"),null):(t.push("/admin/login"),null):(0,i.jsx)(e,{...n})};n.Z=l},2529:function(e,n,t){"use strict";t.r(n);var i=t(5893),a=t(5078),s=t(6477),r=t(7294),l=t(7357),o=t(4593),d=t(2175),c=t(6242),u=t(4267),p=t(2023),h=t(3321),x=t(5861),m=t(315),j=t(8972),f=t(3841),g=t(4054),Z=t(6235),w=t(8945),b=t(6455),y=t.n(b),v=t(6829),P=t(2359),k=t(1085),D=t(7484),_=t.n(D),S=t(2686),C=t(5024),E=t(1163),M=t.n(E);let N={post_date:_()(),topic:"",detail:"",status:"Publish"};n.default=(0,s.Z)(function(){let e=(0,S.t)(),n=(0,r.useRef)(null),[t,s]=r.useState("Publish"),[b,D]=r.useState(_()()),E=e=>{let{values:a,setFieldValue:r,isValid:l}=e;return(0,i.jsx)(d.l0,{children:(0,i.jsxs)(c.Z,{children:[(0,i.jsxs)(u.Z,{sx:{padding:4},children:[(0,i.jsx)(x.Z,{gutterBottom:!0,variant:"h4",children:"Add News JP"}),(0,i.jsx)(P._,{dateAdapter:v.y,children:(0,i.jsx)(k.O,{label:"Post Date",inputFormat:"YYYY-MM-DD",value:b,onChange:e=>{console.log(e),D(e)},renderInput:e=>(0,i.jsx)(d.gN,{...e,fullWidth:!0,component:o.n,name:"post_date",type:"text",label:"Post Date"})})}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(d.gN,{fullWidth:!0,component:o.n,name:"topic",type:"text",label:"Topic"}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(d.gN,{name:"status",style:{marginTop:16},component:()=>(0,i.jsxs)(g.Z,{fullWidth:!0,children:[(0,i.jsx)(f.Z,{children:"Status"}),(0,i.jsxs)(m.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Status",onChange:e=>{s(e.target.value)},value:t,fullWidth:!0,children:[(0,i.jsx)(j.Z,{value:"Publish",children:"Publish"}),(0,i.jsx)(j.Z,{value:"Draft",children:"Draft"})]})]})}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(Z.M,{apiKey:"2s0w71caf8mc5dpcr17pwapuu74ko8mkivvenvzdmvnqyjti",onInit:(e,t)=>n.current=t,initialValue:"",init:{height:750,menubar:!0,automatic_uploads:!1,file_picker_callback:function(e,n,t){var i=document.createElement("input");i.setAttribute("type","file"),i.setAttribute("accept","image/*, video/*"),i.onchange=async function(n){var t=n.target.files[0],i=t.name,a=new FileReader;a.onload=function(n){var t=n.target.result;fetch(t).then(e=>e.blob()).then(async n=>{var t=new FormData;t.append("file",n,i);let a=await w.Z.post("".concat("http://localhost:3001/api","/tinyupload"),t);e(a.data.location,{alt:a.data.alt})})},a.readAsDataURL(t)},i.click()},plugins:"link image textpattern lists table preview media",toolbar:" undo redo preview | formatselect | Link | image media | table | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})]}),(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(h.Z,{disabled:!l,fullWidth:!0,variant:"contained",color:"primary",type:"submit",sx:{marginRight:1},children:"Add"}),(0,i.jsx)(h.Z,{variant:"contained",color:"error",fullWidth:!0,onClick:()=>M().push("/admin/news/jp"),children:"Cancel"})]})]})})};return(0,i.jsx)(a.Z,{children:(0,i.jsx)(l.Z,{children:(0,i.jsx)(l.Z,{sx:{width:"100%",maxWidth:"100%"},children:(0,i.jsx)(d.J9,{validate:e=>{let n={};return e.post_date||(n.post_date="Enter Post Date"),e.topic||(n.topic="Enter Topic"),e.status||(n.status="Enter Status"),n},initialValues:N,onSubmit:async(i,a)=>{let{setSubmitting:s}=a,r=new FormData,l=_()(b,"YYYY-MM-DD").toDate(),o=l.getDate(),d=l.getMonth()+1;d<=9&&(d="0"+d);let c=l.getFullYear(),u=c+"-"+d+"-"+o;r.append("post_date",u),r.append("topic",i.topic),r.append("status",String(t)),n.current?r.append("detail",n.current.getContent()):r.append("detail",""),e((0,C.yQ)(r)).then(e=>{"success"==e.payload.data.status?y().fire("Success!","Your data has been added","success").then(function(){M().push("/admin/news/jp")}):y().fire("Error!","Please check your input","error").then(function(){return!1})}),s(!1)},children:e=>E(e)})})})})})}},function(e){e.O(0,[350,616,903,25,129,774,888,179],function(){return e(e.s=436)}),_N_E=e.O()}]);
//# sourceMappingURL=add-3b30ae01c7a94baf.js.map